spring:
  application:
    name: clinic-backend
  
  # 数据源配置（使用你的 MySQL）
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/node_express?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true
    username: root
    password: Dingtong1998
    
    # 连接池配置
    hikari:
      maximum-pool-size: 10
      minimum-idle: 5
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000
  
  # Redis 配置
  data:
    redis:
      host: localhost
      port: 6379
      password: Dingtong1998
      database: 0
      lettuce:
        pool:
          max-active: 8
          max-idle: 8
          min-idle: 0
          max-wait: -1ms
      timeout: 5000ms
  
  # Jackson 配置（JSON 序列化）
  jackson:
    time-zone: GMT+8
    date-format: yyyy-MM-dd HH:mm:ss
    serialization:
      write-dates-as-timestamps: false
    default-property-inclusion: non_null  # 空值不返回

# MyBatis-Plus 配置
mybatis-plus:
  # Mapper XML 文件位置
  mapper-locations: classpath:mapper/*.xml
  # 实体类包路径
  type-aliases-package: com.clinic.entity
  # 配置
  configuration:
    # 下划线转驼峰（user_name → userName）
    map-underscore-to-camel-case: true
    # 打印 SQL 日志（开发环境）
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
  # 全局配置
  global-config:
    db-config:
      # 主键类型（AUTO: 数据库自增）
      id-type: auto
      # 逻辑删除字段
      logic-delete-field: deletedAt
      # 删除时设置为当前时间
      logic-delete-value: now()
      # 未删除值
      logic-not-delete-value: null

# JWT 配置（自定义配置）
jwt:
  # 密钥（建议生产环境放到环境变量）
  secret: clinic_secret_123_your_very_long_secret_key_minimum_32_characters
  # Access Token 过期时间（30分钟，单位：毫秒）
  access-token-expiration: 1800000
  # Refresh Token 过期时间（7天，单位：毫秒）
  refresh-token-expiration: 604800000

# 服务器配置
server:
  port: 9095
  servlet:
    context-path: /
    encoding:
      charset: UTF-8
      enabled: true
      force: true

# Swagger 配置
springdoc:
  api-docs:
    enabled: true
    path: /v3/api-docs
  swagger-ui:
    enabled: true
    path: /swagger-ui.html
    tags-sorter: alpha
    operations-sorter: alpha

# 日志配置
logging:
  level:
    # 项目日志级别
    com.clinic: DEBUG
    # Spring Security 日志
    org.springframework.security: INFO
    # MyBatis 日志
    com.baomidou.mybatisplus: DEBUG
  # 日志文件
  file:
    name: logs/clinic.log
    max-size: 10MB
    max-history: 30
  # 日志格式
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"